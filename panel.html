<!-- panel.html -->
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Teamber R√©seau</title>
  <style>
    :root {
      --bg: #1e1f24;
      --bg-elev: #25262c;
      --bg-hover: #2c2d34;
      --text: #e6e6e6;
      --muted: #9aa0a6;
      --accent: #5ac8fa;
      --ok: #34c759;
      --warn: #ff9f0a;
      --err: #ff453a;
      --border: #3a3b41;
      --shadow: rgba(0,0,0,0.4);
      --row-height: 28px;
      --sidebar-w: 56%;
    }
    html, body {
      margin: 0; padding: 0; height: 100%; width: 100%;
      background: var(--bg);
      color: var(--text);
      font: 12px/1.4 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
    }
    .toolbar {
      display: flex; align-items: center; gap: 8px;
      padding: 6px 8px; border-bottom: 1px solid var(--border); background: var(--bg-elev);
    }
    .toolbar input[type="text"] {
      flex: 1; min-width: 100px;
      background: #181a1f; color: var(--text);
      border: 1px solid var(--border); border-radius: 4px;
      padding: 6px 8px; outline: none;
    }
    .toolbar button {
      background: #2a2b31; color: var(--text); border: 1px solid var(--border);
      border-radius: 4px; padding: 6px 10px; cursor: pointer;
    }
    .toolbar button:hover { background: var(--bg-hover); }

    .split {
      display: grid; grid-template-rows: 56% 6px 1fr; grid-template-columns: 1fr; height: calc(100% - 40px);
    }
    .list-section { overflow: auto; border-bottom: 1px solid var(--border); }
    .row-resizer {
      background: #2a2b31; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);
      cursor: row-resize; position: relative;
    }
    .row-resizer::after { /* poign√©e visuelle */
      content: '';
      position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
      width: 60px; height: 3px; background: #3a3b41; border-radius: 2px;
    }
    .details { overflow: auto; padding: 8px; }
    .section-header {
      background: var(--bg-elev); color: var(--muted); padding: 6px 8px; border-bottom: 1px solid var(--border);
      font-weight: 700; letter-spacing: .04em;
      display: flex; align-items: center; justify-content: space-between;
      gap: 8px;
    }
    .section-header .actions button {
      background: #2a2b31; color: var(--text); border: 1px solid var(--border);
      border-radius: 4px; padding: 4px 8px; cursor: pointer; font-size: 12px;
    }
    .section-header .actions button:hover { background: var(--bg-hover); }
    .section-header .actions button[disabled] { opacity: .5; cursor: not-allowed; }
    /* Subheader (titre + actions) pour les sections Payload/Response */
    .section-subheader {
      display: flex; align-items: center; justify-content: space-between; gap: 8px;
      margin: 6px 0;
    }
    .section-subheader .actions button {
      background: #2a2b31; color: var(--text); border: 1px solid var(--border);
      border-radius: 4px; padding: 3px 8px; cursor: pointer; font-size: 12px;
    }
    .section-subheader .actions button:hover { background: var(--bg-hover); }
    table { width: 100%; border-collapse: collapse; table-layout: fixed; }
    thead th {
      position: sticky; top: 0; background: var(--bg-elev); color: var(--muted);
      text-align: left; font-weight: 600; border-bottom: 1px solid var(--border);
      padding: 6px 8px; z-index: 1;
    }
    thead th.sortable { cursor: pointer; }
    tbody td { padding: 4px 8px; border-bottom: 1px solid #2a2a2f; }
    tbody tr { height: var(--row-height); }
    tbody tr:hover { background: var(--bg-hover); }
    tbody tr.selected { background: #2b3340; box-shadow: inset 0 0 0 1px #3a4a5f; }
    .col-url { max-width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .col-method { color: var(--accent); font-weight: 600; }
    .col-status.ok { color: var(--ok); }
    .col-status.warn { color: var(--warn); }
    .col-status.err { color: var(--err); }
    .col-size, .col-initiator, .col-file { color: var(--muted); }
        .col-file { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    .section { margin-bottom: 12px; }
    .section h3 { margin: 8px 0 6px; font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: .06em; }
    pre, code, .code {
      background: #15161a; border: 1px solid var(--border); border-radius: 6px;
      padding: 8px; overflow: auto; color: #dfe6f3;
    }
    /* JSON highlight */
    .code.json { max-height: 260px; overflow: auto; }
    .json-key { color: #9cdcfe; }
    .json-string { color: #ce9178; }
    .json-number { color: #b5cea8; }
    .json-boolean { color: #4fc1ff; }
    .json-null { color: #c586c0; }
    /* Inline row for method/status/duration */
    .inline-triplet { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; }
    .inline-triplet .chip { background: #15161a; border: 1px solid var(--border); border-radius: 6px; padding: 8px; color: #dfe6f3; }
    .kv { display: grid; grid-template-columns: 200px 1fr; gap: 6px 12px; }
    .detail-item { margin: 10px 0; }
    .detail-key { color: var(--muted); font-weight: 600; margin-bottom: 4px; }
    .muted { color: var(--muted); }

    /* Menu contextuel custom */
    .ctx-menu {
      position: fixed; min-width: 220px; background: #22242a; border: 1px solid var(--border);
      border-radius: 8px; box-shadow: 0 8px 28px var(--shadow); display: none; z-index: 9999;
    }
    .ctx-item { padding: 8px 12px; cursor: pointer; }
    .ctx-item:hover { background: var(--bg-hover); }

    /* Toast */
    .toast {
      position: fixed; right: 12px; bottom: 12px; background: #222b22; border: 1px solid #375a37; color: #d9f4d9;
      padding: 8px 12px; border-radius: 8px; box-shadow: 0 6px 18px var(--shadow); display: none; z-index: 10000;
    }
  </style>
</head>
<body>
  <div class="toolbar">
    <input id="filter" type="text" placeholder="Filtrer (url ou m√©thode)‚Ä¶" />
    <button id="clearBtn" title="Vider la liste">Clear</button>
  </div>
  <div class="split" id="split">
    <div class="list-section">
      <table>
        <colgroup>
          <col style="width:64px">
          <col style="width:90px">
          <col>
          <col style="width:90px">
        </colgroup>
        <thead>
          <tr>
            <th class="sortable" data-col="status" style="width: 64px">ETAT</th>
            <th class="sortable" data-col="method" style="width: 90px">METHODE</th>
            <th class="sortable" data-col="file">FICHIER</th>
            <th class="sortable" data-col="size" style="width: 90px">Taille</th>
          </tr>
        </thead>
        <tbody id="rows"></tbody>
      </table>
    </div>
    <div id="rowResizer" class="row-resizer" title="Redimensionner"></div>
    <div class="details" id="details">
      <div class="section-header details-header">
        <div class="actions">
          <button id="btnCopy" data-action="copy" disabled>üìã Tout coupier</button>
          <button id="btnCopyToken" data-action="copy-token" disabled>üîê Tout Copier avec token</button>
          <button id="btnCopyPayload" data-action="copy-payload" disabled>üì¶ Copier payload</button>
          <button id="btnCopyResponse" data-action="copy-response" disabled>üßæ Copier r√©ponse</button>
        </div>
      </div>
      <div class="muted" style="padding:8px">S√©lectionnez une requ√™te pour voir les d√©tails‚Ä¶</div>
    </div>
  </div>

  <!-- Menu contextuel -->
  <div class="ctx-menu" id="ctxMenu">
    <div class="ctx-item" data-action="copy">üìã Copier</div>
    <div class="ctx-item" data-action="copy-token">üîê Copier avec token</div>
  </div>

  <div class="toast" id="toast"></div>

  <script src="panel.js"></script>
</body>
</html>
